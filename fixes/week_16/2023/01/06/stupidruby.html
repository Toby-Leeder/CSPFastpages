<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Ruby Fixes for M1 macs | Toby-Leeder-CSPFastpages</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Ruby Fixes for M1 macs" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Easy steps to fix a lot of weird ruby and gems errors on M1 macs" />
<meta property="og:description" content="Easy steps to fix a lot of weird ruby and gems errors on M1 macs" />
<link rel="canonical" href="https://toby-leeder.github.io/CSPFastpages/fixes/week_16/2023/01/06/stupidruby.html" />
<meta property="og:url" content="https://toby-leeder.github.io/CSPFastpages/fixes/week_16/2023/01/06/stupidruby.html" />
<meta property="og:site_name" content="Toby-Leeder-CSPFastpages" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2023-01-06T00:00:00-06:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Ruby Fixes for M1 macs" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-01-06T00:00:00-06:00","datePublished":"2023-01-06T00:00:00-06:00","description":"Easy steps to fix a lot of weird ruby and gems errors on M1 macs","headline":"Ruby Fixes for M1 macs","mainEntityOfPage":{"@type":"WebPage","@id":"https://toby-leeder.github.io/CSPFastpages/fixes/week_16/2023/01/06/stupidruby.html"},"url":"https://toby-leeder.github.io/CSPFastpages/fixes/week_16/2023/01/06/stupidruby.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/CSPFastpages/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://toby-leeder.github.io/CSPFastpages/feed.xml" title="Toby-Leeder-CSPFastpages" /><link rel="shortcut icon" type="image/x-icon" href="/CSPFastpages/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />

<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/CSPFastpages/">Toby-Leeder-CSPFastpages</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/CSPFastpages/about/">About Me</a><a class="page-link" href="/CSPFastpages/lessonNotes">Lesson Notes</a><a class="page-link" href="/CSPFastpages/notes/">Notes</a><a class="page-link" href="/CSPFastpages/search/">Search</a><a class="page-link" href="/CSPFastpages/categories/">Tags</a><a class="page-link" href="/CSPFastpages/timeline/">Timeline</a><a class="page-link" href="/CSPFastpages/Vocab/">Vocabulary</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Ruby Fixes for M1 macs</h1><p class="page-description">Easy steps to fix a lot of weird ruby and gems errors on M1 macs</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2023-01-06T00:00:00-06:00" itemprop="datePublished">
        Jan 6, 2023
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      4 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/CSPFastpages/categories/#fixes">fixes</a>
        &nbsp;
      
        <a class="category-tags-link" href="/CSPFastpages/categories/#week_16">week_16</a>
        
      
      </p>
    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul id="toc" class="section-nav">
<li class="toc-entry toc-h1"><a href="#introduction">Introduction</a></li>
<li class="toc-entry toc-h1"><a href="#what-do-you-do">What do you do</a>
<ul>
<li class="toc-entry toc-h2"><a href="#step-1-install-brew">Step 1: Install brew</a></li>
<li class="toc-entry toc-h2"><a href="#step-2-install-ruby-manager-and-installer">Step 2: Install ruby manager and installer</a></li>
<li class="toc-entry toc-h2"><a href="#step-3-install-ruby">Step 3: Install ruby</a></li>
<li class="toc-entry toc-h2"><a href="#step-4-cd-into-your-directory">Step 4: cd into your directory</a></li>
<li class="toc-entry toc-h2"><a href="#step-5-configure-your-shell">Step 5: Configure your shell</a></li>
<li class="toc-entry toc-h2"><a href="#step-6-check-if-it-worked">Step 6: Check if it worked</a></li>
<li class="toc-entry toc-h2"><a href="#step-7-check-your-gemfile">Step 7: Check your Gemfile</a></li>
<li class="toc-entry toc-h2"><a href="#step-8-install-bundler-if-you-havent-already">Step 8: Install bundler if you haven’t already</a></li>
<li class="toc-entry toc-h2"><a href="#step-9-run-your-server">Step 9: Run your server</a></li>
<li class="toc-entry toc-h2"><a href="#persisting-errors">Persisting errors</a></li>
</ul>
</li>
</ul><h1 id="introduction">
<a class="anchor" href="#introduction" aria-hidden="true"><span class="octicon octicon-link"></span></a>Introduction</h1>
<p>Essentially the issue to my understanding is mac has a default ruby version which isn’t compatiable for our uses. This isn’t bad, but the problem arises when you want to switch to a different version of ruby. You need to change the path which your system uses for ruby. The way I did this was using Chruby. Chruby is a ruby manager which allows you to change which version of ruby you want. It’s kind of overkill for our purposes, but it was the only thing I could get to work.</p>

<h1 id="what-do-you-do">
<a class="anchor" href="#what-do-you-do" aria-hidden="true"><span class="octicon octicon-link"></span></a>What do you do</h1>

<h2 id="step-1-install-brew">
<a class="anchor" href="#step-1-install-brew" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 1: Install brew</h2>
<p>First you need to install brew. Homebrew (brew) is a package manager which basically means it helps you install anything and everything that you need. You should already have brew, so I’m not going to get into steps to install it here. If you don’t have it installed go to this <a href="https://brew.sh/">link</a> and run the command under install.</p>

<p>If you have brew then you need to make sure your brew is up to date. Run the following:</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>brew outdated <span class="c">#This command checks if your packages are outdated. If any of your packages are outdated, run the next two commands.</span>
<span class="nv">$ </span>brew update 
<span class="nv">$ </span>brew upgrade <span class="c">#These upgrade all of your brew dependencies</span>
</code></pre></div></div>
<p>Restart your terminal (close and reopen)</p>
<h2 id="step-2-install-ruby-manager-and-installer">
<a class="anchor" href="#step-2-install-ruby-manager-and-installer" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 2: Install ruby manager and installer</h2>
<p>Now you can actually install the ruby manager and installer. Run the follwing:</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>brew <span class="nb">install </span>chruby ruby-install
</code></pre></div></div>

<h2 id="step-3-install-ruby">
<a class="anchor" href="#step-3-install-ruby" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 3: Install ruby</h2>
<p>Install whatever version of ruby you want. For this project you should use 2.7.7. Run the following:</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ruby-install 2.7.7
</code></pre></div></div>

<p>If it fails with it could be because:</p>
<ul>
  <li>Something is wrong with your development setup</li>
  <li>You tried to install Ruby even though Homebrew reported warnings/errors</li>
</ul>

<p>Read the error message and try to fix it. If you can’t send a message on slack and mention Toby and I can look at it.</p>

<h2 id="step-4-cd-into-your-directory">
<a class="anchor" href="#step-4-cd-into-your-directory" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 4: cd into your directory</h2>
<p>You should know how to do this. cd into whatever directory has the local server you want to run. This will probably be the repository that you copied from Mr. Mortensen.</p>

<h2 id="step-5-configure-your-shell">
<a class="anchor" href="#step-5-configure-your-shell" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 5: Configure your shell</h2>
<p>My understanding of this is right now your computer wants to use the built in ruby version so we need to change it so that it uses the correct path. to do that run these three commands:</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">echo</span> <span class="s2">"source </span><span class="si">$(</span>brew <span class="nt">--prefix</span><span class="si">)</span><span class="s2">/opt/chruby/share/chruby/chruby.sh"</span> <span class="o">&gt;&gt;</span> ~/.zshrc
<span class="nv">$ </span><span class="nb">echo</span> <span class="s2">"source </span><span class="si">$(</span>brew <span class="nt">--prefix</span><span class="si">)</span><span class="s2">/opt/chruby/share/chruby/auto.sh"</span> <span class="o">&gt;&gt;</span> ~/.zshrc
<span class="nv">$ </span><span class="nb">echo</span> <span class="s2">"chruby ruby-2.7.7"</span> <span class="o">&gt;&gt;</span> ~/.zshrc
</code></pre></div></div>

<p>If you get an error saying that the file path can’t be found then restart from upgrading your homebrew. If you get any other error you could also try that or again put it on slack.</p>

<h2 id="step-6-check-if-it-worked">
<a class="anchor" href="#step-6-check-if-it-worked" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 6: Check if it worked</h2>
<p>You should be using the correct ruby version now. Inside of the directory that you used cd to enter earlier run:</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ruby <span class="nt">-v</span>
</code></pre></div></div>
<p>If it says 2.7.7 then it worked and you can move on.</p>

<p>If it doesn’t say 2.7.7 (either says some other version like 2.6.0 or says usr/bin or something along those lines) then run:</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>chruby 2.7.7
</code></pre></div></div>

<p>If that says chruby not found or something along those lines then run:</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">echo</span> <span class="s2">"source ~/.bashrc"</span> <span class="o">&gt;&gt;</span> ~/.bash_profile
</code></pre></div></div>

<p>Then restart the terminal and run:</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>chruby 2.7.7 
</code></pre></div></div>

<p>If the error persists run:</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">.</span> /usr/local/opt/chruby/share/chruby/chruby.sh
<span class="nv">$ </span><span class="nb">.</span> ~/.bashrc
</code></pre></div></div>

<p>Then restart the terminal and run:</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>chruby 2.7.7 
</code></pre></div></div>

<p>If you get a different error (NOT the chruby not found error) try restarting from the beginning or send it on slack.</p>

<h2 id="step-7-check-your-gemfile">
<a class="anchor" href="#step-7-check-your-gemfile" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 7: Check your Gemfile</h2>
<p>Your gemfile should look like this:</p>
<pre><code class="language-gem">source "https://rubygems.org"

gem "github-pages", group: :jekyll_plugins
</code></pre>
<p>Delete anything extra that you have.</p>

<h2 id="step-8-install-bundler-if-you-havent-already">
<a class="anchor" href="#step-8-install-bundler-if-you-havent-already" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 8: Install bundler if you haven’t already</h2>
<p>These instructions are also given on the bundler website. Run:</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bundle <span class="nb">install</span>
<span class="nv">$ </span>git add Gemfile Gemfile.lock
</code></pre></div></div>

<h2 id="step-9-run-your-server">
<a class="anchor" href="#step-9-run-your-server" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 9: Run your server</h2>
<p>Now you should be ready to run your server. Run:</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bundle <span class="nb">exec </span>jekyll serve
</code></pre></div></div>
<p>It will take a very long time the first time you run it.</p>

<h2 id="persisting-errors">
<a class="anchor" href="#persisting-errors" aria-hidden="true"><span class="octicon octicon-link"></span></a>Persisting errors</h2>
<p>If you try to run your server and you still get any errors, the first thing you should do is check that you’re using the correct ruby version in the correct directory (ruby -v) If you are then try all of these steps again from the beginning. If you still are getting errors send a message on slack and I can try to help you.</p>

  </div><a class="u-url" href="/CSPFastpages/fixes/week_16/2023/01/06/stupidruby.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/CSPFastpages/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="https://toby-leeder.github.io/CSPFastpages/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/CSPFastpages/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>An easy to use blogging platform with support for Jupyter Notebooks.</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"></ul>
</div>

  </div>

</footer>
</body>

</html>
